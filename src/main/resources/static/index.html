<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Catering Project</title>
<link href="css/bootstrap.min.css" rel="stylesheet">
<script src="js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
	function changeToHome() {
		document.getElementById("Container").innerHTML = '';
		var button1 =document.getElementById("button1");
		button1.onclick="";
		button1.textContent="";
		button1.hidden=true;
		var button2 =document.getElementById("button2");
		button2.onclick="";
		button2.textContent="";
		button2.hidden=true;
	};
	
	function changeToIngredient() {
		var button1 =document.getElementById("button1");
		button1.onclick=getAllIngredients;
		button1.textContent="Get All Ingredients";
		button1.hidden=false;
		var button2 =document.getElementById("button2");
		button2.onclick=postIngredient;
		button2.textContent="Add Dummy Ingredient";
		button2.hidden=false;
	};
	
	function getAllIngredients() {
		getDataList("ingredient");
		
	};
	
	function postIngredient() {
		postData("ingredient",'{"name":"Onion","type":"Vegetable","unitType":"Piece","caloriePerUnit":0.10}');
		
	};

	function postData(api,data) {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 202) {
				document.getElementById("Container").innerHTML = this.responseText+". Dummy Item Added";
			}
		};
		xhttp.open("POST", "http://localhost:8082/api/" + api, true);
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send(data);
	}
	
	function getDataList(api) {
		var myObj, x, txt = "";
		var xhttp = new XMLHttpRequest();
		var container = document.getElementById("Container");
		container.innerHTML = '';
		
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				myArr = JSON.parse(this.responseText);
				alert(this.responseText);
				var table = document.createElement("Table");
				for (x in myArr) {
					var myObj = myArr[x];
					var row = document.createElement("TR");
					for(y in myObj) {
						var col = document.createElement("TD");
						var textNode = document.createTextNode(myObj[y]);
						col.appendChild(textNode);
						row.appendChild(col);
					};
					table.appendChild(row);
				};
				table.className='table table-striped table-bordered table-hover';
				container.appendChild(table);
			};
		};
		xhttp.open("GET", "http://localhost:8082/api/" + api);
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send();
	}
	function jojo(){
		var jo = document.getElementsByTagName("html");
		console.log(jo);
		jo["0"].children[1].children["0"].style.backgroundColor ="green";
	}
</script>
</head>
<body>
	<nav class="navbar navbar-default">
	  <div class="container-fluid">
	    <div class="navbar-header">
	      <a class="navbar-brand" href="#">ITPH - Fase2 - Catering Project</a>
	    </div>
	    <ul class="nav navbar-nav">
	      <li class="active"><a href="#" onclick="changeToHome()">Home</a></li>
	      <li><a href="#">Page 1</a></li>
	      <li><a href="#">Page 2</a></li>
	      <li><a href="#" onclick="changeToIngredient()">Ingredient</a></li>
	    </ul>
	  </div>
	</nav>
	<div class="container-fluid">
		<div class="row">
			<button id="button1" hidden="true"></button>
	        <button id="button2" hidden="true"></button>
        </div>
		<div id="Container" class="row">
	        
        </div>
    </div>
</body>
</html>